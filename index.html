<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>To æ³½æ›¦å¤§å®ï¼šæˆ‘ä»¬çš„2025</title>
    <style>
        /* --- 1. æŸ”ç¾ç²‰è‰²ç©ºé—´ --- */
        body {
            margin: 0;
            padding: 0;
            /* èƒŒæ™¯ï¼šæŸ”å’Œçš„è«å…°è¿ªç²‰è‰²æ¸å˜ */
            background: radial-gradient(circle at 50% 30%, #ffe0e6, #ff9a9e);
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            font-family: "PingFang SC", sans-serif;
            perspective: 1000px;
        }

        .header {
            position: absolute;
            top: 5%;
            z-index: 20;
            text-align: center;
            color: #fff;
            text-shadow: 0 2px 4px rgba(214, 51, 108, 0.4);
            pointer-events: none;
        }
        h1 { margin: 0; font-size: 1.5rem; letter-spacing: 1px; }
        .subtitle { font-size: 0.8rem; opacity: 0.9; margin-top: 5px; }

        /* --- 2. æ—‹è½¬èˆå° --- */
        .stage {
            position: absolute;
            /* å…³é”®ä¿®æ”¹ï¼šä½ç½®ç¨å¾®é ä¸‹ï¼Œç•™å‡ºä¸Šæ–¹ç©ºé—´ç»™æ›´é«˜çš„æ ‘ */
            bottom: 12%; 
            left: 50%;
            width: 0;
            height: 0;
            transform-style: preserve-3d;
        }

        .tree-gyro {
            position: relative;
            transform-style: preserve-3d;
            /* ç»• Y è½´æ—‹è½¬ï¼Œåº•éƒ¨åœ†å¿ƒå›ºå®š */
            animation: spin 20s infinite linear;
        }

        /* è§¦æ‘¸/æ‚¬åœæš‚åœ */
        .stage:active .tree-gyro, .stage:hover .tree-gyro {
            animation-play-state: paused;
        }

        @keyframes spin {
            0% { transform: rotateY(0deg); }
            100% { transform: rotateY(360deg); }
        }

        /* --- 3. çœŸå®æ„Ÿæ ‘å¹² (åŠ é•¿ç‰ˆ) --- */
        .trunk-base {
            position: absolute;
            bottom: 0;
            left: -16px; /* å±…ä¸­ */
            width: 32px;
            /* å…³é”®ä¿®æ”¹ï¼šæ ‘å¹²é«˜åº¦å¢åŠ åˆ° 440px */
            height: 440px; 
            
            /* æ ‘çš®çº¹ç† */
            background: linear-gradient(90deg, #5d4037, #8d6e63, #5d4037);
            /* å½¢çŠ¶ï¼šä¿®é•¿çš„é”¥ä½“ */
            clip-path: polygon(25% 0, 75% 0, 100% 100%, 0% 100%);
            transform-origin: bottom center;
            transform: translateZ(0.1px);
        }

        /* æ ‘æ ¹ç»†èŠ‚ */
        .root-knot {
            position: absolute;
            bottom: -5px;
            width: 20px;
            height: 40px;
            background: #4e342e;
            border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%;
        }
        .rk-1 { left: -20px; transform: rotate(45deg); }
        .rk-2 { right: -15px; transform: rotate(-30deg); }

        /* --- 4. æ ‘å¶ç²’å­ --- */
        .leaf {
            position: absolute;
            width: 7px;
            height: 7px;
            background: #fff;
            border-radius: 50%;
            box-shadow: 0 0 5px rgba(255, 255, 255, 0.8), 0 0 8px rgba(255, 192, 203, 0.4);
            transform-style: preserve-3d;
        }

        /* --- 5. åº•éƒ¨é˜´å½± --- */
        .floor-shadow {
            position: absolute;
            top: 0;
            left: -100px;
            width: 200px;
            height: 200px;
            background: radial-gradient(circle, rgba(255,255,255,0.5) 0%, transparent 60%);
            transform: rotateX(90deg);
            pointer-events: none;
        }

        /* --- 6. æœå® (ç›¸å†Œå…¥å£) --- */
        .fruit {
            position: absolute;
            width: 32px;
            height: 32px;
            background: radial-gradient(circle at 35% 35%, #fff, #ff6b81, #c2185b);
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(255, 105, 180, 0.6);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            transform-style: preserve-3d;
            z-index: 100;
        }
        .fruit::after { content: 'â™¥'; color: #880e4f; opacity: 0.6; }

        /* --- 7. å¼¹çª— --- */
        .modal-wrap {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(80, 50, 50, 0.6);
            backdrop-filter: blur(4px);
            z-index: 999;
            display: none;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .modal-wrap.active { display: flex; opacity: 1; }
        
        .card {
            background: #fff;
            padding: 10px 10px 35px 10px;
            border-radius: 8px;
            text-align: center;
            transform: scale(0.8) translateY(20px);
            transition: transform 0.3s;
            max-width: 80%;
        }
        .modal-wrap.active .card { transform: scale(1) translateY(0); }
        
        .card img {
            width: 260px;
            height: 260px;
            object-fit: cover;
            border-radius: 4px;
            background: #f0f0f0;
        }
        .card-text { margin-top: 10px; color: #444; font-weight: bold; font-family: cursive; }
        .card-tip { font-size: 10px; color: #aaa; margin-top: 5px; }

    </style>
</head>
<body>

    <div class="header">
        <h1>ğŸ„ To æ³½æ›¦å¤§å®ï¼šæˆ‘ä»¬çš„2025ï¼Œå¹³å®‰å¤œå¿«ä¹ ğŸ„</h1>
        <div class="subtitle">è½»è§¦æœå® Â· æš‚åœç¾å¥½ Â· æ‰“å¼€å›å¿†</div>
    </div>

    <div class="stage">
        <div class="tree-gyro" id="treeRoot">
            <div class="trunk-base">
                <div class="root-knot rk-1"></div>
                <div class="root-knot rk-2"></div>
            </div>
            <div class="floor-shadow"></div>
            </div>
    </div>

    <div class="modal-wrap" id="modal" onclick="closeModal()">
        <div class="card" onclick="event.stopPropagation()">
            <img id="m-img" src="" alt="">
            <div class="card-text" id="m-text"></div>
            <div class="card-tip">å†æ¬¡ç‚¹å‡»èƒŒæ™¯å…³é—­</div>
        </div>
    </div>

    <script>
        // === 1. ç…§ç‰‡æ•°æ® ===
        const memories = [
            { img: "1.jpg?w=500", text: "çˆ±ä½ å°±åƒçˆ±ç”Ÿå‘½" },
            { img: "2.jpg?w=500", text: "å’Œå¤§å®ä¸€èµ·æ—…æ¸¸å•¦~" },
            { img: "3.jpg?w=500", text: "ç¬¬ä¸€æ¬¡æ‹æµ·æŠ¥ï¼" },
            { img: "4.jpg?w=500", text: "è¿™ä¸€åˆ»å¥½åƒæ°¸è¿œ" },
            { img: "5.jpg?w=500", text: "å¤§å®åšçš„é¥­" },
            { img: "6.jpg?w=500", text: "æˆ‘å®¶ç£¨ç‰™çš„å°çŒª" },
            { img: "7.jpg?w=500", text: "çˆ±ä½ ï¼Œä¸æ­¢è¿™ä¸€åˆ»" }
        ];

        const treeRoot = document.getElementById('treeRoot');
        
        // === å…³é”®è°ƒæ•´ï¼šæ ‘çš„å‚æ•° ===
        const leafCount = 800; // å¢åŠ å¶å­æ•°é‡ï¼Œé˜²æ­¢æ ‘å˜é«˜åæ˜¾å¾—ç¨€ç–
        const treeHeight = 440; // æ ‘çš„é«˜åº¦å¢åŠ  (åŸ340 -> 440)
        const maxRadius = 135;  // åº•éƒ¨åŠå¾„å¾®è°ƒ

        // === 2. æ„å»ºé€»è¾‘ ===
        function buildTree() {
            // ç”Ÿæˆæ ‘å¶
            for (let i = 0; i < leafCount; i++) {
                const leaf = document.createElement('div');
                leaf.classList.add('leaf');

                const hRatio = i / leafCount; // 0 ~ 1
                const y = -hRatio * treeHeight; // å‘ä¸Šç”Ÿé•¿
                
                // åŠå¾„æ›²çº¿ï¼šè®©æ ‘çœ‹èµ·æ¥ç¨å¾®ç˜¦é•¿ä¸€ç‚¹
                const r = maxRadius * (1 - hRatio);
                const angle = i * 137.5; 
                const randomR = r * (0.8 + Math.random() * 0.4);

                const rad = angle * Math.PI / 180;
                const x = Math.cos(rad) * randomR;
                const z = Math.sin(rad) * randomR;

                if(Math.random() > 0.85) {
                    leaf.style.backgroundColor = '#ff69b4';
                    leaf.style.boxShadow = '0 0 5px #ff69b4';
                }

                leaf.style.transform = `translate3d(${x}px, ${y}px, ${z}px)`;
                treeRoot.appendChild(leaf);
            }

            // ç”Ÿæˆæœå®
            memories.forEach((memo, i) => {
                const fruit = document.createElement('div');
                fruit.classList.add('fruit');

                // æœå®åˆ†å¸ƒèŒƒå›´ç¨å¾®å‘ä¸­é—´é›†ä¸­ä¸€ç‚¹ï¼Œé¿å…å¤ªé è¿‘åº•éƒ¨
                const hRatio = 0.15 + (i / (memories.length - 1)) * 0.75; 
                
                const y = -hRatio * treeHeight;
                const r = (maxRadius * (1 - hRatio)) + 18; 
                
                const angle = i * 60 + 30;

                const rad = angle * Math.PI / 180;
                const x = Math.cos(rad) * r;
                const z = Math.sin(rad) * r;

                fruit.style.transform = `translate3d(${x}px, ${y}px, ${z}px)`;
                
                fruit.onclick = (e) => {
                    e.stopPropagation();
                    openModal(i);
                };

                treeRoot.appendChild(fruit);
            });
        }

        // === 3. äº¤äº’é€»è¾‘ ===
        const modal = document.getElementById('modal');
        const mImg = document.getElementById('m-img');
        const mText = document.getElementById('m-text');

        function openModal(index) {
            mImg.src = memories[index].img;
            mText.innerText = memories[index].text;
            modal.classList.add('active');
        }

        function closeModal() {
            modal.classList.remove('active');
        }

        // === 4. é£˜é›ªç‰¹æ•ˆ ===
        function snow() {
            const s = document.createElement('div');
            s.style.position = 'absolute';
            s.style.top = '-10px';
            s.style.left = Math.random() * 100 + '%';
            s.style.width = Math.random() * 4 + 2 + 'px';
            s.style.height = s.style.width;
            s.style.background = 'rgba(255,255,255,0.7)';
            s.style.borderRadius = '50%';
            s.style.pointerEvents = 'none';
            s.style.animation = `fall ${Math.random()*4+4}s linear`;
            document.body.appendChild(s);
            setTimeout(() => s.remove(), 8000);
        }
        
        const style = document.createElement('style');
        style.innerHTML = `@keyframes fall { to { transform: translateY(110vh); } }`;
        document.head.appendChild(style);
        
        setInterval(snow, 100);

        buildTree();

    </script>
</body>
</html>
